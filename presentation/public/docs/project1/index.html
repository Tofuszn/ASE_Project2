<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ASE230 Portfolio - ASE230 Project 1 – Dealership API</title><link rel=stylesheet href=https://tofuszn.github.io/ASE_Project2/css/style.css></head><body><header class=site-header><div class=brand><span class=title>ASE230 Portfolio</span>
<span class=desc>ASE230 REST API + Docker + Hugo portfolio</span></div><nav><a href=https://tofuszn.github.io/ASE_Project2/>Home</a>
<a href=https://tofuszn.github.io/ASE_Project2/docs/>Docs</a>
<a href=https://tofuszn.github.io/ASE_Project2/portfolio/>Portfolio</a></nav></header><main class=content><article><h1>ASE230 Project 1 – Dealership API</h1><h1 id=ase230-project-1>ASE230 Project 1</h1><h2 id=dealership-rest-api-overview>Dealership REST API Overview</h2><ul><li>Carlo Calipo</li><li>PHP / MySQL / NGINX deployment</li></ul><hr><h1 id=presentation-roadmap>Presentation Roadmap</h1><ul><li>Project objective & architecture</li><li>Authentication design</li><li>API catalogue with request / response samples</li><li>Testing strategy and evidence</li><li>Deployment to NGINX</li><li>Operational refinements & next steps</li></ul><hr><h1 id=technology-stack>Technology Stack</h1><ul><li>PHP 8.2 with PDO (no framework dependencies)</li><li>MySQL 8 (Homebrew-managed service)</li><li>JSON payloads for all requests and responses</li><li>Bearer token authorization for state-changing endpoints</li><li>Tooling: <code>code/curl.sh</code>, <code>code/tests.html</code>, <code>schema.sql</code></li></ul><hr><h1 id=api-catalogue>API Catalogue</h1><ol><li><code>POST /api.php?resource=auth</code> — Authenticate & issue token</li><li><code>GET /api.php?resource=cars</code> — Retrieve inventory</li><li><code>GET /api.php?resource=cars&amp;id={id}</code> — Retrieve specific vehicle</li><li><code>POST /api.php?resource=cars</code> — Create vehicle <em>(token required)</em></li><li><code>PUT /api.php?resource=cars&amp;id={id}</code> — Update vehicle <em>(token required)</em></li><li><code>DELETE /api.php?resource=cars&amp;id={id}</code> — Remove vehicle <em>(token required)</em></li><li><code>GET /api.php?resource=sales</code> — List recorded sales</li><li><code>POST /api.php?resource=sales</code> — Record sale <em>(token required)</em></li></ol><hr><h1 id=environment-setup>Environment Setup</h1><ul><li>Start database: <code>brew services start mysql</code></li><li>Provision schema: <code>mysql -u root -p &lt; code/schema.sql</code></li><li>Admin credentials: username <code>admin</code>, password <code>Carlo</code></li><li>Launch development API: <code>php -S localhost:3000 -t code</code></li><li>Verify readiness: <code>GET http://localhost:3000/api.php</code></li></ul><hr><h1 id=database-schema>Database Schema</h1><ul><li><code>cars</code>: <code>id</code>, <code>make</code>, <code>model</code>, <code>year</code>, <code>price</code>, <code>status</code></li><li><code>sales</code>: <code>id</code>, <code>car_id</code>, <code>customer_name</code>, <code>sale_price</code>, <code>date</code></li><li><code>staff</code>: <code>id</code>, <code>username</code>, <code>password_hash</code>, <code>role</code>, <code>token</code></li><li>Foreign key: <code>sales.car_id → cars.id (ON DELETE CASCADE)</code></li></ul><hr><h1 id=authentication-flow>Authentication Flow</h1><ol><li>Client submits credentials to <code>POST /api.php?resource=auth</code></li><li>Server retrieves salted hash from <code>staff</code> and validates password</li><li>Token generated via <code>random_bytes(32)</code> and persisted on staff record</li><li>Response returns <code>{"token": "&lt;64 hex characters>"}</code></li><li>Subsequent protected requests include <code>Authorization: Bearer &lt;token></code></li></ol><hr><h1 id=authentication-example>Authentication Example</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>POST /api.php?resource=auth
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;username&#34;: &#34;admin&#34;,
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;password&#34;: &#34;Carlo&#34;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}
</span></span></span></code></pre></div><p>Response <code>200 OK</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;token&#34;</span>: <span style=color:#e6db74>&#34;f5b4c8e7...&#34;</span> }
</span></span></code></pre></div><hr><h1 id=cars--list-all>Cars – List All</h1><p><code>GET /api.php?resource=cars</code></p><ul><li>Public endpoint returning the fleet ordered by newest first</li><li>Utilizes PDO prepared statements to avoid injection</li></ul><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>GET /api.php?resource=cars
</span></span></span></code></pre></div><p>Response <code>200 OK</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>[{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;make&#34;</span>:<span style=color:#e6db74>&#34;Toyota&#34;</span>,<span style=color:#f92672>&#34;model&#34;</span>:<span style=color:#e6db74>&#34;Supra&#34;</span>,<span style=color:#f92672>&#34;year&#34;</span>:<span style=color:#ae81ff>2021</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;price&#34;</span>:<span style=color:#e6db74>&#34;55000.00&#34;</span>,<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;available&#34;</span>}]
</span></span></code></pre></div><hr><h1 id=cars--retrieve-one>Cars – Retrieve One</h1><p><code>GET /api.php?resource=cars&amp;id={id}</code></p><ul><li>Public endpoint for a single vehicle record</li><li>Returns <code>404</code> JSON when the identifier does not exist</li></ul><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>GET /api.php?resource=cars&amp;id=1
</span></span></span></code></pre></div><p>Response <code>200 OK</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;make&#34;</span>:<span style=color:#e6db74>&#34;Toyota&#34;</span>,<span style=color:#f92672>&#34;model&#34;</span>:<span style=color:#e6db74>&#34;Supra&#34;</span>,<span style=color:#f92672>&#34;year&#34;</span>:<span style=color:#ae81ff>2021</span>,
</span></span><span style=display:flex><span> <span style=color:#f92672>&#34;price&#34;</span>:<span style=color:#e6db74>&#34;55000.00&#34;</span>,<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;available&#34;</span>}
</span></span></code></pre></div><hr><h1 id=cars--create>Cars – Create</h1><p><code>POST /api.php?resource=cars</code></p><ul><li>Requires valid Bearer token</li><li>Validates presence of <code>make</code>, <code>model</code>, <code>year</code>, <code>price</code></li><li>Returns created identifier</li></ul><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>POST /api.php?resource=cars
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Authorization: Bearer &lt;token&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;make&#34;: &#34;Honda&#34;,
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;model&#34;: &#34;Civic&#34;,
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;year&#34;: 2020,
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;price&#34;: 21500
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}
</span></span></span></code></pre></div><p>Response <code>201 Created</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>5</span> }
</span></span></code></pre></div><hr><h1 id=cars--update>Cars – Update</h1><p><code>PUT /api.php?resource=cars&amp;id={id}</code></p><ul><li>Requires Bearer token</li><li>Accepts partial updates for <code>make</code>, <code>model</code>, <code>year</code>, <code>price</code>, <code>status</code></li><li>Returns confirmation of affected row</li></ul><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>PUT /api.php?resource=cars&amp;id=5
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Authorization: Bearer &lt;token&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{ &#34;price&#34;: 20999, &#34;status&#34;: &#34;available&#34; }
</span></span></span></code></pre></div><p>Response <code>200 OK</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;updated&#34;</span>: <span style=color:#66d9ef>true</span> }
</span></span></code></pre></div><hr><h1 id=cars--delete>Cars – Delete</h1><p><code>DELETE /api.php?resource=cars&amp;id={id}</code></p><ul><li>Requires Bearer token</li><li>Removes the record and reports outcome</li></ul><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>DELETE /api.php?resource=cars&amp;id=5
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Authorization: Bearer &lt;token&gt;
</span></span></span></code></pre></div><p>Response <code>200 OK</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;deleted&#34;</span>: <span style=color:#66d9ef>true</span> }
</span></span></code></pre></div><hr><h1 id=sales--list>Sales – List</h1><p><code>GET /api.php?resource=sales</code></p><ul><li>Public endpoint listing all completed sales</li><li>Includes timestamp (<code>TIMESTAMP DEFAULT CURRENT_TIMESTAMP</code>)</li></ul><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>GET /api.php?resource=sales
</span></span></span></code></pre></div><p>Response <code>200 OK</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>[{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#ae81ff>3</span>,<span style=color:#f92672>&#34;car_id&#34;</span>:<span style=color:#ae81ff>5</span>,<span style=color:#f92672>&#34;customer_name&#34;</span>:<span style=color:#e6db74>&#34;Jane Doe&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;sale_price&#34;</span>:<span style=color:#e6db74>&#34;53500.00&#34;</span>,<span style=color:#f92672>&#34;date&#34;</span>:<span style=color:#e6db74>&#34;2025-02-02T18:45:10Z&#34;</span>}]
</span></span></code></pre></div><hr><h1 id=sales--create>Sales – Create</h1><p><code>POST /api.php?resource=sales</code></p><ul><li>Requires Bearer token</li><li>Validates <code>car_id</code>, <code>customer_name</code>, <code>sale_price</code></li><li>Confirms vehicle exists, records sale, marks car as <code>sold</code></li></ul><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>POST /api.php?resource=sales
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Authorization: Bearer &lt;token&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;car_id&#34;: 5,
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;customer_name&#34;: &#34;Jane Doe&#34;,
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;sale_price&#34;: 53500
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}
</span></span></span></code></pre></div><p>Response <code>201 Created</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>3</span> }
</span></span></code></pre></div><hr><h1 id=error-handling--security>Error Handling & Security</h1><ul><li>Central <code>respond()</code> helper sets status codes and JSON encoding</li><li><code>require_token()</code> verifies Authorization header and staff token</li><li>Invalid credentials → <code>403</code>; missing fields → <code>400</code>; unknown routes → <code>404</code></li><li>CORS headers (<code>Access-Control-Allow-*</code>) enable external clients</li></ul><hr><h1 id=automated-tests--curlsh>Automated Tests – curl.sh</h1><ul><li>Script targets <code>http://localhost:3000/api.php</code></li><li>Performs login, car CRUD cycle, and sale creation using dynamic IDs</li><li>Uses <code>jq</code> for structured output and halts on failure</li></ul><p><img src=../../images/project1_curltest.png alt="Terminal output from bash code/curl.sh"></p><hr><h1 id=browser-test-harness--testshtml>Browser Test Harness – tests.html</h1><ul><li>Hosted under the same PHP server (<code>php -S localhost:3000 -t code</code>)</li><li>Provides buttons for login, list/create/update/delete car, and create sale</li><li>Displays JSON responses and refreshes listings after each action</li></ul><p><img src=../../images/project1_testhtml.png alt="Screenshot of code/tests.html after CRUD workflow"></p><hr><h1 id=manual-qa-checklist>Manual QA Checklist</h1><ul><li>Start PHP server: <code>php -S localhost:3000 -t code</code></li><li>Execute UI walkthrough via <code>tests.html</code></li><li>Run <code>bash code/curl.sh</code> for automated verification</li><li>Inspect MySQL state (<code>SELECT * FROM cars;</code>, <code>SELECT * FROM sales;</code>)</li></ul><hr><h1 id=deliverables--evidence>Deliverables & Evidence</h1><ul><li><code>code/</code> directory containing API, schema, curl script, browser tester</li><li><code>presentation/dealership_api.marp.md</code> and generated PDF</li><li>Screenshot evidence (<code>images/curltest.png</code>, <code>images/testhtml.png</code>, <code>images/nginx-status.png</code>)</li><li>GitHub repository link provided in rubric</li></ul><hr><h1 id=deployment-overview>Deployment Overview</h1><ul><li>NGINX reverse proxy in front of PHP-FPM</li><li><code>try_files</code> routes requests to <code>api.php</code></li><li>FastCGI socket: <code>/run/php/php8.2-fpm.sock</code></li><li>Separate configuration for production database credentials</li></ul><hr><h1 id=nginx-configuration>NGINX Configuration</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>server</span> {
</span></span><span style=display:flex><span>  <span style=color:#f92672>listen</span> <span style=color:#ae81ff>80</span>;
</span></span><span style=display:flex><span>  <span style=color:#f92672>server_name</span> <span style=color:#e6db74>my-dealership.local</span>;
</span></span><span style=display:flex><span>  <span style=color:#f92672>root</span> <span style=color:#e6db74>/var/www/dealership</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>location</span> <span style=color:#e6db74>/</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>try_files</span> $uri <span style=color:#e6db74>/api.php?</span>$query_string;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>location</span> ~ <span style=color:#e6db74>\.php$</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>include</span> <span style=color:#e6db74>fastcgi_params</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>fastcgi_pass</span> <span style=color:#e6db74>unix:/run/php/php8.2-fpm.sock</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>fastcgi_param</span> <span style=color:#e6db74>SCRIPT_FILENAME</span> $document_root$fastcgi_script_name;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h1 id=deployment-procedure>Deployment Procedure</h1><ol><li>Copy project to <code>/var/www/dealership</code></li><li>Configure database credentials (<code>database.php</code> or <code>.env</code>)</li><li>Execute <code>mysql &lt; code/schema.sql</code></li><li>Enable NGINX site and reload (<code>sudo systemctl reload nginx</code>)</li><li>Validate <code>http://server/api.php</code> and <code>?resource=cars</code></li></ol><hr><h1 id=nginx-evidence>NGINX Evidence</h1><p><img src=../../images/project1_nginx-status.png alt="Screenshot of NGINX status"></p><ul><li>Demonstrates active service for grading requirements</li></ul><hr><h1 id=hardening-considerations>Hardening Considerations</h1><ul><li>Rotate admin password and token periodically</li><li>Introduce token expiration and refresh logic</li></ul><hr><h1 id=portfolio-highlights>Portfolio Highlights</h1><ul><li>RESTful design implemented with plain PHP + PDO</li><li>Secure token-based authorization for protected routes</li><li>Automated and manual testing assets included in repository</li><li>Documented deployment process with supporting evidence</li></ul><hr><h1 id=github-link>GitHub Link</h1><ul><li>Link: <code>https://github.com/Tofuszn/ASE_Project1</code></li></ul><hr><h1 id=future-enhancements>Future Enhancements</h1><ul><li>Add customer management and advanced search filters</li><li>Build a front-end dashboard consuming this API</li><li>Automate scheduled database backups</li></ul></article></main><footer class=site-footer><p>&copy; 2025 Carlo Calipo — Built with Hugo</p></footer></body></html>