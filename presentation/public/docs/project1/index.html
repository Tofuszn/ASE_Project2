<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ASE230 Portfolio - Project 1 – PHP Dealership API</title><link rel=stylesheet href=https://tofuszn.github.io/ASE_Project2/css/style.css></head><body><header class=site-header><div class=brand><span class=title>ASE230 Portfolio</span>
<span class=desc>ASE230 REST API + Docker + Hugo portfolio</span></div><nav><a href=https://tofuszn.github.io/ASE_Project2/>Home</a>
<a href=https://tofuszn.github.io/ASE_Project2/docs/>Docs</a>
<a href=https://tofuszn.github.io/ASE_Project2/portfolio/>Portfolio</a></nav></header><main class=content><article><h1>Project 1 – PHP Dealership API</h1><h1 id=ase230-project-1--dealership-rest-api>ASE230 Project 1 – Dealership REST API</h1><h2 id=overview>Overview</h2><ul><li>PHP / MySQL / NGINX deployment</li><li>Plain PHP 8.2 + PDO (no framework)</li><li>JSON requests/responses; bearer token for write operations</li></ul><h2 id=presentation-roadmap>Presentation Roadmap</h2><ul><li>Project objective & architecture</li><li>Authentication design</li><li>API catalogue with request/response samples</li><li>Testing strategy and evidence</li><li>Deployment to NGINX</li><li>Operational refinements & next steps</li></ul><h2 id=technology-stack>Technology Stack</h2><ul><li>PHP 8.2 with PDO (no framework dependencies)</li><li>MySQL 8 (Homebrew-managed service)</li><li>JSON payloads for all requests/responses</li><li>Bearer token authorization for state-changing endpoints</li><li>Tooling: <code>curl.sh</code>, <code>tests.html</code>, <code>schema.sql</code></li></ul><h2 id=api-catalogue>API Catalogue</h2><ol><li><code>POST /api.php?resource=auth</code> — Authenticate & issue token</li><li><code>GET /api.php?resource=cars</code> — Retrieve inventory</li><li><code>GET /api.php?resource=cars&amp;id={id}</code> — Retrieve specific vehicle</li><li><code>POST /api.php?resource=cars</code> — Create vehicle <em>(token required)</em></li><li><code>PUT /api.php?resource=cars&amp;id={id}</code> — Update vehicle <em>(token required)</em></li><li><code>DELETE /api.php?resource=cars&amp;id={id}</code> — Remove vehicle <em>(token required)</em></li><li><code>GET /api.php?resource=sales</code> — List recorded sales</li><li><code>POST /api.php?resource=sales</code> — Record sale <em>(token required)</em></li></ol><h2 id=environment-setup>Environment Setup</h2><ul><li>Start database: <code>brew services start mysql</code></li><li>Provision schema: <code>mysql -u root -p &lt; code/schema.sql</code></li><li>Admin credentials: username <code>admin</code>, password <code>Carlo</code></li><li>Launch dev API: <code>php -S localhost:3000 -t code</code></li><li>Verify readiness: <code>GET http://localhost:3000/api.php</code></li></ul><h2 id=database-schema>Database Schema</h2><ul><li><code>cars</code>: <code>id</code>, <code>make</code>, <code>model</code>, <code>year</code>, <code>price</code>, <code>status</code></li><li><code>sales</code>: <code>id</code>, <code>car_id</code>, <code>customer_name</code>, <code>sale_price</code>, <code>date</code></li><li><code>staff</code>: <code>id</code>, <code>username</code>, <code>password_hash</code>, <code>role</code>, <code>token</code></li><li>Foreign key: <code>sales.car_id → cars.id (ON DELETE CASCADE)</code></li></ul><h2 id=authentication-flow>Authentication Flow</h2><ol><li>Client submits credentials to <code>POST /api.php?resource=auth</code></li><li>Server retrieves salted hash from <code>staff</code> and validates password</li><li>Token generated via <code>random_bytes(32)</code> and persisted on staff record</li><li>Response returns <code>{"token": "&lt;64 hex characters>"}</code></li><li>Protected requests include <code>Authorization: Bearer &lt;token></code></li></ol><h3 id=authentication-example>Authentication Example</h3><p>Request:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>POST /api.php?resource=auth
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;username&#34;: &#34;admin&#34;,
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  &#34;password&#34;: &#34;Carlo&#34;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}
</span></span></span></code></pre></div><p>Response <code>200 OK</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#f92672>&#34;token&#34;</span>: <span style=color:#e6db74>&#34;f5b4c8e7...&#34;</span> }
</span></span></code></pre></div><h2 id=cars-endpoints>Cars Endpoints</h2><ul><li><code>GET /api.php?resource=cars</code> — List all (public)</li><li><code>GET /api.php?resource=cars&amp;id={id}</code> — Get one (public)</li><li><code>POST /api.php?resource=cars</code> — Create (auth)</li><li><code>PUT /api.php?resource=cars&amp;id={id}</code> — Update (auth)</li><li><code>DELETE /api.php?resource=cars&amp;id={id}</code> — Delete (auth)</li></ul><p>Example list response:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>[{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;make&#34;</span>:<span style=color:#e6db74>&#34;Toyota&#34;</span>,<span style=color:#f92672>&#34;model&#34;</span>:<span style=color:#e6db74>&#34;Supra&#34;</span>,<span style=color:#f92672>&#34;year&#34;</span>:<span style=color:#ae81ff>2021</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;price&#34;</span>:<span style=color:#e6db74>&#34;55000.00&#34;</span>,<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;available&#34;</span>}]
</span></span></code></pre></div><h2 id=sales-endpoint>Sales Endpoint</h2><ul><li><code>GET /api.php?resource=sales</code> — List recorded sales (public)</li><li><code>POST /api.php?resource=sales</code> — Record sale (auth)</li></ul><p>Example payload:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;car_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;customer_name&#34;</span>: <span style=color:#e6db74>&#34;Jane Doe&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;sale_price&#34;</span>: <span style=color:#ae81ff>53500</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Creates a sale, marks the car as <code>sold</code>, returns the sale ID.</p><h2 id=testing--evidence>Testing & Evidence</h2><ul><li><code>curl.sh</code> covers login, CRUD cars, record sale, delete, and verifies responses.</li><li><code>tests.html</code> browser harness for manual exercise of auth/cars/sales.</li><li>JSON-only responses with proper status codes (200/201/400/401/403/404/405).</li></ul><h2 id=deployment>Deployment</h2><ul><li>Homebrew MySQL service for dev</li><li>PHP built-in server for local testing (<code>php -S localhost:3000 -t code</code>)</li><li>NGINX deployment for production-style hosting</li><li>Ensure <code>.sql</code> schema is loaded and admin credentials set before start</li></ul></article></main><footer class=site-footer><p>&copy; 2025 Carlo Calipo — Built with Hugo</p></footer></body></html>