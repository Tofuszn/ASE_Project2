<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ASE230 Portfolio - Project 2 – Laravel, Docker, Hugo</title><link rel=stylesheet href=https://tofuszn.github.io/ASE_Project2/css/style.css></head><body><header class=site-header><div class=brand><span class=title>ASE230 Portfolio</span>
<span class=desc>ASE230 REST API + Docker + Hugo portfolio</span></div><nav><a href=https://tofuszn.github.io/ASE_Project2/>Home</a>
<a href=https://tofuszn.github.io/ASE_Project2/docs/>Docs</a>
<a href=https://tofuszn.github.io/ASE_Project2/portfolio/>Portfolio</a></nav></header><main class=content><article><h1>Project 2 – Laravel, Docker, Hugo</h1><h1 id=ase230-project-2--laravel-rest-api--docker--hugo>ASE230 Project 2 – Laravel REST API + Docker + Hugo</h1><h2 id=overview>Overview</h2><ul><li>Re-implemented the Project 1 dealership API using Laravel 12 + Sanctum.</li><li>Eloquent-only data layer; no raw SQL.</li><li>Docker stack with one-command scripts for app + MySQL.</li><li>Hugo documentation + GitHub Pages auto-deploy via Actions.</li></ul><h2 id=goals--outcomes>Goals & Outcomes</h2><ul><li><strong>API parity</strong> with Project 1 plus Laravel best practices.</li><li><strong>Auth</strong>: Sanctum bearer tokens for all write operations.</li><li><strong>Data</strong>: ULID users; cars/sales tables with relationships.</li><li><strong>Ops</strong>: One-command local runner + Docker setup script.</li><li><strong>Docs</strong>: Hugo site with screenshots and evidence.</li><li><strong>CI/CD</strong>: GitHub Actions builds docs and publishes to Pages.</li></ul><h2 id=architecture>Architecture</h2><ul><li>Laravel 12 (PHP 8.4) with Sanctum.</li><li>MySQL 8 (Docker service).</li><li>Eloquent models: <code>User</code>, <code>Car</code>, <code>Sale</code>.</li><li>Routes under <code>/api/*</code> with <code>auth:sanctum</code> for write paths.</li><li>Seeded admin user: <code>admin</code> / <code>Carlo</code>.</li></ul><h2 id=api-catalogue>API Catalogue</h2><ul><li><code>POST /api/auth/login</code> — Issue bearer token.</li><li><code>GET /api/cars</code> — List cars.</li><li><code>GET /api/cars/{id}</code> — Get car details.</li><li><code>POST /api/cars</code> — Create car (auth).</li><li><code>PUT /api/cars/{id}</code> — Update car (auth).</li><li><code>DELETE /api/cars/{id}</code> — Delete car (auth).</li><li><code>GET /api/sales</code> — List sales.</li><li><code>POST /api/sales</code> — Record sale (auth).</li></ul><h2 id=auth-flow-sanctum>Auth Flow (Sanctum)</h2><ol><li>Client posts credentials to <code>/api/auth/login</code>.</li><li>Password hash verified; Sanctum token created.</li><li>Token returned; subsequent writes require <code>Authorization: Bearer &lt;token></code>.</li><li><code>auth:sanctum</code> middleware protects POST/PUT/DELETE routes.</li></ol><h2 id=data-model>Data Model</h2><ul><li><strong>users</strong>: ULID id, username, role, password (hashed).</li><li><strong>cars</strong>: make, model, year, price, status (<code>available|sold</code>).</li><li><strong>sales</strong>: car_id, customer_name, sale_price, timestamps.</li><li><strong>personal_access_tokens</strong>: Sanctum tokens with ULID morphs.</li><li>Relationships: User has tokens; Car has many Sales; Sale belongs to Car.</li></ul><h2 id=migrations--seeders>Migrations & Seeders</h2><ul><li>Migrations create users, cars, sales, Sanctum tokens.</li><li>Seeder:<ul><li>Admin user (<code>admin</code> / <code>Carlo</code>).</li><li>Sample cars (Supra, Mustang).</li></ul></li><li>Idempotent seeding (updateOrCreate / firstOrCreate).</li></ul><h2 id=deployment-scripts>Deployment Scripts</h2><ul><li><strong>Local:</strong> <code>code/run.sh</code><ul><li>composer install, <code>php artisan key:generate</code>, migrate &ndash;seed, serve on :8000.</li></ul></li><li><strong>Docker:</strong> <code>code/setup.sh</code><ul><li>Builds app + MySQL, waits for DB, migrate &ndash;seed.</li></ul></li><li><strong>Compose:</strong> <code>code/docker-compose.yml</code> (app + MySQL), <code>code/Dockerfile</code> (PHP 8.4).</li></ul><h2 id=testing-aids>Testing Aids</h2><ul><li><code>code/tests/curl.sh</code> — full flow: login → CRUD cars → sale → delete.</li><li><code>code/tests/tests.html</code> — prompt-based browser harness for manual checks.</li></ul><h2 id=evidence-screenshots>Evidence (Screenshots)</h2><p><img src=../../images/setupSS.png alt="setup.sh success"></p><p><img src=../../images/htmlTestSS.png alt="Browser tester output"></p><p><img src=../../images/curlTestSS.png alt="cURL flow output"></p><p><img src=../../images/runTestSS.png alt="run.sh local stack"></p><h2 id=configuration-notes>Configuration Notes</h2><ul><li><code>.env</code> set for MySQL host <code>db</code> (Docker) or <code>127.0.0.1</code> locally.</li><li>Sanctum guard added; ULID morph for tokens to avoid truncation.</li><li>CORS enabled for <code>/api/*</code>.</li></ul><h2 id=lessons-learned>Lessons Learned</h2><ul><li>Composer lock demanded PHP 8.4 in Docker to match deps.</li><li>Sanctum + ULID requires <code>ulidMorphs</code> on <code>personal_access_tokens</code>.</li><li>Canonical URLs for GitHub Pages subpath to fix link issues.</li><li>Seeders should be idempotent to avoid duplicate admin errors.</li></ul><h2 id=troubleshooting>Troubleshooting</h2><ul><li><strong>Auth 500 + tokenable_id truncation</strong>: use <code>ulidMorphs</code> in tokens migration.</li><li><strong>Pages links doubled path</strong>: set <code>baseURL</code> and use canonical URLs; adjust menu links.</li><li><strong>Docker compose DB not found</strong>: ensure services running, rerun <code>setup.sh</code>.</li></ul><h2 id=detailed-endpoint-behaviors>Detailed Endpoint Behaviors</h2><ul><li>Cars POST/PUT validate make/model/year/price; status optional on update.</li><li>Sales POST validates car exists; marks car as <code>sold</code> after sale creation.</li><li>Deletes return <code>{deleted: true}</code> and 404 when re-fetching.</li></ul><h2 id=security-considerations>Security Considerations</h2><ul><li>Sanctum tokens only; no sessions/cookies.</li><li>Bearer required for all write operations.</li><li>Validation on inputs; 404/401/403 responses for bad states.</li></ul><h2 id=performance--stability>Performance & Stability</h2><ul><li>Simple query patterns via Eloquent.</li><li>Seeded data for instant testing.</li><li>Docker isolates app + DB; consistent local/dev environment.</li></ul><h2 id=documentation--pages>Documentation & Pages</h2><ul><li>Hugo site under <code>presentation/</code> with custom layouts (no external theme).</li><li>Docs for Project1/Project2, Portfolio, screenshots, links to tests.</li><li>GitHub Actions (<code>.github/workflows/gh-pages.yml</code>) builds Hugo and deploys to Pages.</li></ul><h2 id=how-to-run-local>How to Run (Local)</h2><pre tabindex=0><code>cd code
./run.sh
</code></pre><p>Hit <code>http://localhost:8000/api</code> and use <code>curl.sh</code> or <code>tests.html</code>.</p><h2 id=how-to-run-docker>How to Run (Docker)</h2><pre tabindex=0><code>cd code
./setup.sh
</code></pre><p>App on <code>http://localhost:8000/api</code>. Credentials: <code>admin</code> / <code>Carlo</code>.</p><h2 id=testing-flow-sample>Testing Flow (Sample)</h2><ol><li>Login → token</li><li>Create car (auth)</li><li>Update price (auth)</li><li>Record sale (auth)</li><li>List sales</li><li>Delete car (auth) → 404 on fetch</li></ol><h2 id=evidence-narrative>Evidence Narrative</h2><ul><li><strong>setup.sh</strong>: shows successful build, migrate, seed with app+db containers.</li><li><strong>Browser tester</strong>: manual buttons for auth/cars/sales returning JSON.</li><li><strong>cURL flow</strong>: scripted end-to-end outputs confirming CRUD + sale.</li></ul><h2 id=future-enhancements>Future Enhancements</h2><ul><li>Add pagination and filters to <code>/api/cars</code>.</li><li>Add OpenAPI/Swagger documentation.</li><li>Add PHPUnit feature tests for controllers.</li><li>Add CI to run tests on push.</li></ul><h2 id=key-files-reference>Key Files Reference</h2><ul><li>Routes: <code>code/backend/routes/api.php</code></li><li>Controllers: <code>AuthController</code>, <code>CarController</code>, <code>SaleController</code></li><li>Models: <code>User</code> (ULID, HasApiTokens), <code>Car</code>, <code>Sale</code></li><li>Migrations: users, cars, sales, personal_access_tokens (ULID morph)</li><li>Seeders: <code>DatabaseSeeder</code> (admin + sample cars)</li><li>Scripts: <code>run.sh</code>, <code>setup.sh</code></li><li>Tests: <code>code/tests/curl.sh</code>, <code>code/tests/tests.html</code></li></ul><h2 id=summary>Summary</h2><p>Project 2 delivers a Laravel-based dealership API with Sanctum auth, Dockerized deployment, one-command scripts, comprehensive tests, and a Hugo site published via GitHub Pages, fully re-implementing Project 1 with modern tooling and CI/CD.</p></article></main><footer class=site-footer><p>&copy; 2025 Carlo Calipo — Built with Hugo</p></footer></body></html>